<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NEXUS v4.1 Professional</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", YuGothic, sans-serif; }
        .safe-area-bottom { padding-bottom: env(safe-area-inset-bottom); }
        .animate-slide-up { animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        .barcode-line { height: 60px; border-left: 2px solid #000; margin-right: 2px; display: inline-block; }
        .map-bg { background-color: #f0f4f8; background-image: radial-gradient(#cbd5e1 2px, transparent 2px); background-size: 25px 25px; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const NEXUSApp = () => {
            const [activeTab, setActiveTab] = useState('Talk');
            const [selectedChat, setSelectedChat] = useState(null);
            const [isSplitView, setIsSplitView] = useState(false);
            const [plusMenuOpen, setPlusMenuOpen] = useState(false);
            const [locationMenuOpen, setLocationMenuOpen] = useState(false);
            const [paymentFlow, setPaymentFlow] = useState(null); // 'scanning', 'selecting', 'success'
            const [messages, setMessages] = useState([
                { id: 1, sender: 'other', text: "Ê∏ãË∞∑„Å´ÁùÄ„ÅÑ„Åü„ÇàÔºÅ" },
                { id: 2, sender: 'me', text: "‰ªäÂêë„Åã„Å£„Å¶„ÇãÔºÅ" }
            ]);
            const [inputText, setInputText] = useState("");

            // --- „É°„ÉÉ„Çª„Éº„Ç∏ÈÄÅ‰ø° ---
            const handleSendMessage = () => {
                if (!inputText.trim()) return;
                const newMsg = { id: Date.now(), sender: 'me', text: inputText };
                setMessages([...messages, newMsg]);
                setInputText("");
            };

            // --- ÁîªÈù¢ÔºöPost ---
            const PostView = () => (
                <div className="pt-24 pb-20 animate-slide-up">
                    <div className="fixed top-0 w-full max-w-md bg-white z-50 border-b">
                        <div className="flex items-center p-3 gap-3">
                            <div className="w-9 h-9 bg-gray-200 rounded-full border overflow-hidden">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=NEXUS" alt="me" />
                            </div>
                            <div className="flex-1 bg-gray-100 rounded-full flex items-center px-4 py-2 text-gray-400 text-sm">
                                <i className="bi bi-search mr-2"></i> „Ç≠„Éº„ÉØ„Éº„ÉâÊ§úÁ¥¢
                            </div>
                        </div>
                        <div className="flex font-bold text-sm text-center">
                            <button className="flex-1 py-3 border-b-2 border-blue-600">„Éï„Ç©„É≠„Éº‰∏≠</button>
                            <button className="flex-1 py-3 text-gray-400">Âêå„Åò„Éè„ÉÉ„Ç∑„É•„Çø„Ç∞</button>
                        </div>
                    </div>
                    {[1, 2, 3].map(i => (
                        <div key={i} className="bg-white p-4 border-b">
                            <div className="flex gap-3 text-sm">
                                <div className="w-10 h-10 bg-indigo-100 rounded-full flex-shrink-0"></div>
                                <div className="flex-1">
                                    <p className="font-bold">NEXUS Official <i className="bi bi-patch-check-fill text-blue-500"></i></p>
                                    <p className="mt-1 leading-relaxed text-gray-800">Êñ∞„Åó„ÅÑSearchÊ©üËÉΩ„Åß„ÅØ„ÄÅ‰ΩçÁΩÆÊÉÖÂ†±„Çí‰Ωø„Å£„Å¶Ëøë„Åè„ÅÆ„Ç§„Éô„É≥„Éà„ÇÑ„É¶„Éº„Ç∂„Éº„ÇíÊé¢Á¥¢„Åß„Åç„Åæ„ÅôÔºÅ #NEXUS #Update</p>
                                    <div className="mt-3 flex gap-8 text-gray-400">
                                        <span><i className="bi bi-chat"></i> 15</span>
                                        <span><i className="bi bi-heart"></i> 82</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    ))}
                </div>
            );

            // --- ÁîªÈù¢ÔºöSearch (Âú∞Âõ≥Êé¢Á¥¢) ---
            const SearchView = () => (
                <div className="h-full pt-14 pb-16 map-bg relative flex flex-col">
                    <div className="p-4 z-10">
                        <div className="bg-white rounded-2xl shadow-lg p-3 flex items-center gap-2">
                            <i className="bi bi-search text-gray-400"></i>
                            <input className="flex-1 outline-none text-sm" placeholder="Ëøë„Åè„ÅÆ„É¶„Éº„Ç∂„Éº„ÉªÂ∫óËàó„ÇíÊ§úÁ¥¢" />
                        </div>
                    </div>
                    <div className="flex-1 relative">
                        {/* „ÉÄ„Éü„Éº„ÅÆ„Éî„É≥ */}
                        <div className="absolute top-1/3 left-1/4 text-blue-600 flex flex-col items-center">
                            <div className="bg-white px-2 py-1 rounded-full shadow text-[10px] font-bold mb-1">„Çµ„Éà„Ç¶„Åï„Çì</div>
                            <i className="bi bi-geo-alt-fill text-3xl"></i>
                        </div>
                        <div className="absolute top-1/2 right-1/3 text-orange-500 flex flex-col items-center">
                            <div className="bg-white px-2 py-1 rounded-full shadow text-[10px] font-bold mb-1">„Ç´„Éï„Çß 10%OFF</div>
                            <i className="bi bi-shop text-3xl"></i>
                        </div>
                    </div>
                    <div className="p-4 z-10">
                        <div className="bg-white rounded-2xl p-4 shadow-xl border border-blue-100">
                            <p className="text-xs font-bold text-blue-600 mb-2 underline text-center">‰ΩçÁΩÆÊÉÖÂ†±„Å´Âü∫„Å•„ÅÑ„Åü„Åä„Åô„Åô„ÇÅ</p>
                            <div className="flex gap-3 overflow-x-auto pb-2 scrollbar-hide">
                                <div className="min-w-[120px] bg-gray-50 p-2 rounded-lg border">
                                    <p className="text-[10px] font-bold">ITÂãâÂº∑‰ºö</p>
                                    <p className="text-[9px] text-gray-500">„Åì„Åì„Åã„Çâ 300m</p>
                                </div>
                                <div className="min-w-[120px] bg-gray-50 p-2 rounded-lg border">
                                    <p className="text-[10px] font-bold">26Âçí„Ç™„Éï‰ºö</p>
                                    <p className="text-[9px] text-gray-500">„Åì„Åì„Åã„Çâ 800m</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );

            // --- ÁîªÈù¢ÔºöPay ---
            const PayView = () => (
                <div className="pt-10 px-6 pb-24 h-full bg-white animate-slide-up overflow-y-auto">
                    {/* ÊÆãÈ´ò */}
                    <div className="mt-4 bg-slate-900 text-white p-6 rounded-[2rem] shadow-2xl relative overflow-hidden mb-8">
                        <p className="text-[10px] opacity-50 font-bold uppercase tracking-[0.2em]">Nexus Wallet Balance</p>
                        <h2 className="text-4xl font-black mt-1">¬• 12,580</h2>
                        <div className="mt-4 flex gap-2">
                            <span className="bg-white/10 px-3 py-1 rounded-full text-[10px]">Ëá™Âãï„ÉÅ„É£„Éº„Ç∏ ON</span>
                        </div>
                    </div>

                    {/* „Éê„Éº„Ç≥„Éº„Éâ„Çπ„Ç≠„É£„É≥„Éú„Çø„É≥ (Ë™≠„ÅøÂèñ„ÇäÈñãÂßã) */}
                    <button onClick={() => setPaymentFlow('scanning')} className="w-full bg-blue-600 text-white p-5 rounded-2xl flex items-center justify-center gap-3 shadow-lg mb-6 hover:bg-blue-700 active:scale-95 transition-all">
                        <i className="bi bi-upc-scan text-2xl"></i>
                        <span className="font-bold text-lg">„Éê„Éº„Ç≥„Éº„Éâ„ÇíË™≠„ÅøÂèñ„Çã</span>
                    </button>

                    {/* My „Éê„Éº„Ç≥„Éº„Éâ (Á∏¶Á∑ö„Éá„Ç∂„Ç§„É≥) */}
                    <div className="bg-gray-50 border border-gray-100 p-8 rounded-[2rem] text-center">
                        <p className="text-[10px] font-bold text-gray-400 mb-4 tracking-widest uppercase">My Pay Barcode</p>
                        <div className="bg-white p-6 inline-block rounded-xl shadow-inner border border-gray-100">
                            {/* „Éê„Éº„Ç≥„Éº„Éâ„ÅÆÊì¨‰ºº„Éá„Ç∂„Ç§„É≥ */}
                            <div className="flex items-center justify-center bg-white px-4 py-2">
                                {[1,3,1,2,4,1,2,1,3,2,1,4].map((w, i) => (
                                    <div key={i} className="bg-black mr-[2px]" style={{width: `${w}px`, height: '50px'}}></div>
                                ))}
                            </div>
                            <p className="text-[10px] mt-2 font-mono tracking-[0.5em]">1234 5678 9012</p>
                        </div>
                    </div>

                    {/* Ê±∫Ê∏à„Éï„É≠„ÉºÔºö„Çπ„Ç≠„É£„Éã„É≥„Ç∞‰∏≠„Ç§„É°„Éº„Ç∏ */}
                    {paymentFlow === 'scanning' && (
                        <div className="fixed inset-0 bg-black z-[100] flex flex-col items-center justify-center p-10 text-white animate-slide-up">
                            <div className="w-72 h-48 border-2 border-blue-500 rounded-xl relative overflow-hidden">
                                <div className="absolute inset-0 bg-blue-500/20 animate-pulse"></div>
                                <div className="w-full h-1 bg-blue-500 absolute top-1/2 animate-bounce shadow-[0_0_15px_rgba(59,130,246,1)]"></div>
                            </div>
                            <p className="mt-10 font-bold">„Éê„Éº„Ç≥„Éº„Éâ„ÇíË™çË≠ò„Åó„Åæ„Åó„Åü</p>
                            <button onClick={() => setPaymentFlow('selecting')} className="mt-6 bg-white text-black px-8 py-3 rounded-full font-bold">Ê±∫Ê∏àÊñπÊ≥ï„ÅÆÈÅ∏Êäû„Å∏</button>
                        </div>
                    )}

                    {/* Ê±∫Ê∏à„Éï„É≠„ÉºÔºö„Çª„Éñ„É≥È¢® Ê±∫Ê∏àÊñπÊ≥ïÈÅ∏Êäû */}
                    {paymentFlow === 'selecting' && (
                        <div className="fixed inset-0 bg-gray-100 z-[110] flex flex-col animate-slide-up">
                            <div className="p-6 bg-white border-b pt-14 text-center">
                                <p className="text-gray-500 text-sm mb-1">„ÅäÊîØÊâï„ÅÑÂêàË®à</p>
                                <h3 className="text-3xl font-black">¬• 1,280</h3>
                            </div>
                            <div className="p-4 grid grid-cols-2 gap-3 mt-4 flex-1">
                                <button onClick={() => setPaymentFlow('success')} className="bg-white border-2 border-blue-500 rounded-xl flex flex-col items-center justify-center p-4">
                                    <div className="text-blue-600 font-black italic mb-1">NEXUS</div>
                                    <span className="text-xs font-bold">ÊÆãÈ´òÊâï„ÅÑ</span>
                                </button>
                                <button onClick={() => setPaymentFlow('success')} className="bg-white border-2 border-gray-200 rounded-xl flex flex-col items-center justify-center p-4">
                                    <i className="bi bi-credit-card text-2xl mb-1 text-gray-700"></i>
                                    <span className="text-xs font-bold">„ÇØ„É¨„Ç∏„ÉÉ„Éà„Ç´„Éº„Éâ</span>
                                </button>
                                <button onClick={() => setPaymentFlow('success')} className="bg-white border-2 border-gray-200 rounded-xl flex flex-col items-center justify-center p-4">
                                    <span className="text-red-500 font-black text-sm mb-1">PayPay</span>
                                    <span className="text-xs font-bold">PayPayÊ±∫Ê∏à</span>
                                </button>
                                <button onClick={() => setPaymentFlow('success')} className="bg-white border-2 border-gray-200 rounded-xl flex flex-col items-center justify-center p-4 text-gray-400">
                                    <i className="bi bi-three-dots text-2xl mb-1"></i>
                                    <span className="text-xs font-bold">„Åù„ÅÆ‰ªñ</span>
                                </button>
                            </div>
                            <button onClick={() => setPaymentFlow(null)} className="m-4 bg-gray-300 py-4 rounded-xl font-bold text-gray-600">„Ç≠„É£„É≥„Çª„É´</button>
                        </div>
                    )}

                    {paymentFlow === 'success' && (
                        <div className="fixed inset-0 bg-white z-[120] flex flex-col items-center justify-center p-10 text-center animate-slide-up">
                            <div className="w-24 h-24 bg-green-500 text-white rounded-full flex items-center justify-center text-5xl mb-6 shadow-xl"><i className="bi bi-check-lg"></i></div>
                            <h2 className="text-3xl font-black mb-2">Ê±∫Ê∏àÂÆå‰∫Ü</h2>
                            <p className="text-gray-400 font-bold mb-10 tracking-widest">Thank you!</p>
                            <button onClick={() => setPaymentFlow(null)} className="w-full bg-slate-900 text-white py-4 rounded-2xl font-black tracking-widest">„Éõ„Éº„É†„Å´Êàª„Çã</button>
                        </div>
                    )}
                </div>
            );

            // --- ÁîªÈù¢ÔºöTalkË©≥Á¥∞ ---
            const ChatDetail = () => (
                <div className="fixed inset-0 bg-white z-[60] flex flex-col">
                    <div className="h-14 flex items-center px-4 border-b flex-shrink-0 bg-white mt-0">
                        <button onClick={() => {setSelectedChat(null); setIsSplitView(false);}} className="text-2xl mr-4"><i className="bi bi-chevron-left"></i></button>
                        <span className="font-bold flex-1 text-center">{selectedChat.name}</span>
                        <div className="w-8"></div>
                    </div>

                    {isSplitView && (
                        <div className="h-2/5 map-bg relative border-b-2 border-blue-100 animate-slide-up">
                            <div className="absolute top-4 left-4 bg-white/90 p-2 rounded-lg text-[9px] font-bold shadow-sm border border-blue-100">
                                <span className="text-blue-600">Áõ∏‰∫í„Éï„Ç©„É≠„Éº‰∏≠</span><br/>
                                <span className="text-orange-600">Ëøë„Åè„Å´„ÇØ„Éº„Éù„É≥„ÅÇ„Çä <i className="bi bi-tag-fill"></i></span>
                            </div>
                            <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                                <i className="bi bi-geo-alt-fill text-blue-600 text-3xl animate-bounce"></i>
                            </div>
                        </div>
                    )}

                    <div className="flex-1 overflow-y-auto p-4 space-y-4">
                        {messages.map((m) => (
                            <div key={m.id} className={`flex ${m.sender === 'me' ? 'justify-end' : 'justify-start'}`}>
                                <div className={`max-w-[75%] p-3 rounded-2xl text-[13px] leading-relaxed ${m.sender === 'me' ? 'bg-green-500 text-white rounded-tr-none' : 'bg-gray-100 text-gray-800 rounded-tl-none'}`}>
                                    {m.text}
                                </div>
                            </div>
                        ))}
                    </div>

                    <div className="p-2 border-t bg-white">
                        <div className="flex items-center gap-2">
                            <button onClick={() => setPlusMenuOpen(!plusMenuOpen)} className={`text-2xl transition-all ${plusMenuOpen ? 'rotate-45 text-gray-400' : 'text-gray-500'}`}>
                                <i className="bi bi-plus-lg"></i>
                            </button>
                            <input 
                                value={inputText}
                                onChange={(e) => setInputText(e.target.value)}
                                onKeyDown={(e) => e.key === 'Enter' && handleSendMessage()}
                                className="flex-1 bg-gray-100 rounded-full px-4 py-2 text-[14px] outline-none border-none" 
                                placeholder="„É°„ÉÉ„Çª„Éº„Ç∏..." 
                            />
                            <button onClick={handleSendMessage} className={`font-bold px-2 transition-colors ${inputText ? 'text-blue-500' : 'text-gray-300'}`}>ÈÄÅ‰ø°</button>
                        </div>

                        {plusMenuOpen && (
                            <div className="grid grid-cols-4 gap-6 p-6 animate-slide-up">
                                <button className="flex flex-col items-center gap-2">
                                    <div className="w-14 h-14 bg-gray-100 rounded-2xl flex items-center justify-center text-2xl text-gray-600"><i className="bi bi-image"></i></div>
                                    <span className="text-[10px] font-bold">ÂÜôÁúü</span>
                                </button>
                                <button className="flex flex-col items-center gap-2">
                                    <div className="w-14 h-14 bg-gray-100 rounded-2xl flex items-center justify-center text-2xl text-gray-600"><i className="bi bi-camera-video"></i></div>
                                    <span className="text-[10px] font-bold">ÂãïÁîª</span>
                                </button>
                                <button onClick={() => setLocationMenuOpen(true)} className="flex flex-col items-center gap-2">
                                    <div className="w-14 h-14 bg-blue-50 rounded-2xl flex items-center justify-center text-2xl text-blue-600 border border-blue-100"><i className="bi bi-geo-alt"></i></div>
                                    <span className="text-[10px] font-bold">‰ΩçÁΩÆÊÉÖÂ†±</span>
                                </button>
                                <button className="flex flex-col items-center gap-2">
                                    <div className="w-14 h-14 bg-orange-50 rounded-2xl flex items-center justify-center text-2xl text-orange-600 border border-orange-100"><i className="bi bi-currency-yen"></i></div>
                                    <span className="text-[10px] font-bold">Pay</span>
                                </button>
                            </div>
                        )}
                    </div>

                    {/* ‰ΩçÁΩÆÊÉÖÂ†±„Çµ„Éñ„É°„Éã„É•„Éº */}
                    {locationMenuOpen && (
                        <div className="fixed inset-0 bg-black/40 z-[100] flex flex-col justify-end animate-slide-up">
                            <div className="bg-white rounded-t-3xl p-6 pb-10">
                                <h4 className="text-center font-bold mb-6 text-gray-500 text-sm">‰ΩçÁΩÆÊÉÖÂ†±„É°„Éã„É•„Éº</h4>
                                <div className="space-y-3">
                                    <button onClick={() => {
                                        setMessages([...messages, {id: Date.now(), sender:'me', text: "üìç ÁèæÂú®Âú∞„ÇíÈÄÅ‰ø°„Åó„Åæ„Åó„Åü"}]);
                                        setLocationMenuOpen(false); setPlusMenuOpen(false);
                                    }} className="w-full py-4 bg-gray-50 rounded-2xl font-bold flex items-center justify-center gap-2">
                                        <i className="bi bi-send-fill text-blue-500"></i> ÁèæÂú®Âú∞„ÇíÈÄÅ‰ø°„Åô„Çã
                                    </button>
                                    <button onClick={() => {
                                        setIsSplitView(true); setLocationMenuOpen(false); setPlusMenuOpen(false);
                                    }} className="w-full py-4 bg-blue-600 text-white rounded-2xl font-bold flex items-center justify-center gap-2 shadow-lg">
                                        <i className="bi bi-people-fill"></i> „É™„Ç¢„É´„Çø„Ç§„É†‰ΩçÁΩÆ„ÇíË¶ã„Çã
                                    </button>
                                    <button onClick={() => setLocationMenuOpen(false)} className="w-full py-4 text-gray-400 font-bold">„Ç≠„É£„É≥„Çª„É´</button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );

            return (
                <div className="max-w-md mx-auto h-screen relative bg-white shadow-2xl overflow-hidden flex flex-col">
                    <main className="flex-1 overflow-hidden">
                        {activeTab === 'Post' && <PostView />}
                        {activeTab === 'Talk' && (
                            <div className="pt-12 px-4 h-full overflow-y-auto">
                                <div className="flex justify-between items-center py-4 px-2">
                                    <h2 className="text-2xl font-black italic">Talk</h2>
                                    <i className="bi bi-person-plus text-xl"></i>
                                </div>
                                {[{id:1, name:"Áî∞‰∏≠ ÂÅ•Â§™", msg:"Ê∏ãË∞∑„Å´ÁùÄ„ÅÑ„Åü„ÇàÔºÅ", time:"12:45"}, {id:2, name:"‰ΩêËó§ ÁæéÂí≤", msg:"‰ΩçÁΩÆÊÉÖÂ†±ÈÄÅ„Çã„Å≠", time:"Êò®Êó•"}].map(c => (
                                    <div key={c.id} onClick={() => setSelectedChat(c)} className="flex items-center gap-4 py-3 border-b border-gray-50 active:bg-gray-100 px-2 transition-colors">
                                        <div className="w-14 h-14 bg-gray-100 rounded-full border overflow-hidden">
                                            <img src={`https://api.dicebear.com/7.x/avataaars/svg?seed=${c.id * 123}`} alt="av" />
                                        </div>
                                        <div className="flex-1 min-w-0">
                                            <div className="flex justify-between items-center mb-1">
                                                <span className="font-bold text-gray-800">{c.name}</span>
                                                <span className="text-[10px] text-gray-400">{c.time}</span>
                                            </div>
                                            <p className="text-xs text-gray-400 truncate">{c.msg}</p>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                        {activeTab === 'Pay' && <PayView />}
                        {activeTab === 'Search' && <SearchView />}
                    </main>

                    {/* „Çø„Éñ„Éê„Éº (LINEÈ¢® 4„Çø„Éñ) */}
                    <nav className="h-16 flex border-t bg-white safe-area-bottom z-50">
                        {[
                            {id:'Post', icon:'grid'},
                            {id:'Talk', icon:'chat-dots'},
                            {id:'Pay', icon:'credit-card'},
                            {id:'Search', icon:'compass'}
                        ].map(t => (
                            <button key={t.id} onClick={() => {setActiveTab(t.id); setSelectedChat(null);}} className={`flex-1 flex flex-col items-center justify-center gap-1 ${activeTab === t.id ? 'text-blue-600' : 'text-gray-400'}`}>
                                <i className={`bi bi-${t.icon}${activeTab === t.id ? '-fill' : ''} text-xl`}></i>
                                <span className="text-[9px] font-bold uppercase tracking-wider">{t.id}</span>
                            </button>
                        ))}
                    </nav>

                    {selectedChat && <ChatDetail />}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<NEXUSApp />);
    </script>
</body>
</html>
